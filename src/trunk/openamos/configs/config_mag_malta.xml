<ProjectConfig>
  <Project name="mag_zone" location="/home/kkonduri/simtravel/test/mag_zone/" seed="10" subsample="40000"/>
  <DTAConnection value="True"/>
  <DBConfig dbprotocol="postgres" dbhost="localhost" dbname="mag_zone" dbusername="postgres" dbpassword="1234"/>
  <TravelSkims reference_tablename="travel_skims" indb="True">
    <Period tablename="travel_skims_offpeak" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="0" intervalEnd="119"/>
    <Period tablename="travel_skims_offpeak" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="120" intervalEnd="299"/>
    <Period tablename="travel_skims_offpeak" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="300" intervalEnd="659"/>
    <Period tablename="travel_skims_offpeak" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="660" intervalEnd="899"/>
    <Period tablename="travel_skims_offpeak" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="900" intervalEnd="1439"/>
  </TravelSkims>

  <Locations reference_tablename="locations" tablename="locations" location_var="locationid" indb="True">
    <LocationVariable var="retail_employment"/>
    <LocationVariable var="industrial_employment"/>
    <LocationVariable var="total_area"/>
    <LocationVariable var="institutional_population"/>
  </Locations>

  <DBTables>
    <Table table="persons" key="houseid,personid" order="1"/>
    <Table table="trips_r" key="houseid,personid" count_key="tripid"/>
    <Table table="schedule_final_r" key="houseid,personid" count_key="scheduleid"/>
  </DBTables>



  <ModelConfig>


    <Component name="ExtractTravelEpisodes" read_from_table="schedule_final_r" write_to_table="trips_r" key="houseid,personid" location="True" skip="False" completed="True">
      <AnalysisInterval start="195" end="196" step="1"/>

      <SpatialConstraints table="travel_skims" skim_var="tt" as_var="tt_to" origin_var="origin" destination_var="destination">
	<Start table="schedule_final_r" location_var="locationid" time_var="endtime"/>
	<End table="schedule_final_r" location_var="locationid" time_var="starttime"/>
      </SpatialConstraints>

      <Model name="DummyLocationId" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="locationid"/>
	<Variance value="0"/>
        <Variable table="runtime" var="locationid" coeff="1"/>
      </Model>

      <Model name="VehicleID" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="vehid"/>
	<Variance value="0"/>
        <Variable table="persons" var="one" coeff="1"/>
      </Model>
      <Model name="ModeChoice" formulation="Probability Distribution" seed="1">
        <DependentVariable var="tripmode"/>

        <Alternative id="SOV" value="1">
          <Variable table="persons" var="one" coeff="0.0"/>
        </Alternative>
        <Alternative id="HOVD" value="2">
          <Variable table="persons" var="one" coeff="0.0"/>
        </Alternative>
        <Alternative id="HOVP" value="3">
          <Variable table="persons" var="one" coeff="1.0"/>
        </Alternative>
      </Model>
      <Model name="FromZone" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="fromzone"/>
	<Variance value="0"/>
        <Variable table="runtime" var="st_locationid" coeff="1"/>
      </Model>
      <Model name="ToZone" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="tozone"/>
	<Variance value="0"/>
        <Variable table="runtime" var="en_locationid" coeff="1"/>
      </Model>
      <Model name="starttime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="starttime"/>
	<Variance value="0"/>
        <Variable table="runtime" var="st_endtime" coeff="1"/>
      </Model>
      <Model name="endtime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="endtime"/>
	<Variance value="0"/>
        <Variable table="runtime" var="en_starttime" coeff="1"/>
      </Model>

      <Model name="duration" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="duration"/>
	<Variance value="0"/>
        <Variable table="runtime" var="starttime" coeff="-1"/>
        <Variable table="runtime" var="endtime" coeff="1"/>
      </Model>

      <Model name="validtrip" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="tripind"/>
	<Filter table="runtime" var="st_locationid" condition="not equals" valuetable="runtime" valuevar="en_locationid"/>
	<Variance value="0"/>
        <Variable table="persons" var="one" coeff="1"/>
      </Model>

      <Model name="validtrip" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="tripind"/>
        <FilterSet type="and"/>
	<Filter table="runtime" var="st_locationid" condition="equals" valuetable="runtime" valuevar="en_locationid"/>
	<Filter table="runtime" var="en_activitytype" condition="greater than equals" value="200"/>
	<Filter table="runtime" var="duration" condition="greater than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="persons" var="one" coeff="1"/>
      </Model>



      <Model name="TripID" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="tripid"/>
	<Filter table="runtime" var="tripind" condition="equals" value="1"/>
	<Variance value="0"/>
        <Variable table="runtime" var="max_tripid" coeff="1"/>
        <Variable table="persons" var="one" coeff="1"/>
      </Model>

    </Component>




  </ModelConfig>
</ProjectConfig>


