<ProjectConfig>
  <Project name="mag_zone" location="/home/kkonduri/simtravel/test/mag_zone/" seed="10" subsample="40000"/>
  <DTAConnection value="True"/>
  <DBConfig dbprotocol="postgres" dbhost="localhost" dbname="mag_zone" dbusername="postgres" dbpassword="1234"/>
  <TravelSkims reference_tablename="travel_skims" indb="True">
    <Period tablename="travel_skims_offpeak" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="0" intervalEnd="119"/>
    <Period tablename="travel_skims_offpeak" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="120" intervalEnd="299"/>
    <Period tablename="travel_skims_offpeak" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="300" intervalEnd="659"/>
    <Period tablename="travel_skims_offpeak" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="660" intervalEnd="899"/>
    <Period tablename="travel_skims_offpeak" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="900" intervalEnd="1439"/>
  </TravelSkims>

  <Locations reference_tablename="locations" tablename="locations" location_var="locationid" indb="True">
    <LocationVariable var="retail_employment"/>
    <LocationVariable var="public_employment"/>
    <LocationVariable var="residential_population"/>
    <LocationVariable var="total_area"/>
    <LocationVariable var="multi_family_dwelling"/>
    <LocationVariable var="single_family_dwelling"/>
    <LocationVariable var="institutional_population"/>
  </Locations>


  <ModelConfig>

    <Component name="ArrivalTimeInformation" read_from_table="trips_arrival_from_malta_r" key="tripid" skip="False" completed="True">
      <DBTables>
    	<Table table="trips_arrival_from_malta_r" key="tripid"/>
      </DBTables>

      <Model1 name="TripID" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="tripid"/>
	<Variance value="0"/>
        <Variable table="runtime" var="tripid" coeff="1"/>
      </Model1>

      <Model name="ArrivalTime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="arrivaltime"/>
	<Variance value="0"/>
        <Variable table="runtime" var="arrivaltime" coeff="1"/>
      </Model>


   </Component>

    <Component name="PersonsArrived" read_from_table="trips_arrival_from_malta_r" write_to_table="persons_arrived_r" key="tripid" skip="False" completed="True">
      <DBTables>
    	<Table table="trips_arrival_from_malta_r" key="tripid" order="1"/>
	<Table table="trips_to_malta_r" key="tripid"/>
    	<Table table="persons_arrived_r" key="tripid"/>

      </DBTables>

      <AnalysisIntervalFilter table="trips_arrival_from_malta_r" var="arrivaltime"/>

      <Model name="Houseid" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="houseid"/>
	<Variance value="0"/>
        <Variable table="trips_to_malta_r" var="houseid" coeff="1"/>
      </Model>

      <Model name="Personid" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="personid"/>
	<Variance value="0"/>
        <Variable table="trips_to_malta_r" var="personid" coeff="1"/>
      </Model>

      <Model name="ActualStartTime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="expectedstarttime"/>
	<Variance value="0"/>
        <Variable table="trips_to_malta_r" var="starttime" coeff="1"/>
      </Model>

      <Model name="ExpectedArrivalTime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="expectedarrivaltime"/>
	<Variance value="0"/>
        <Variable table="trips_to_malta_r" var="endtime" coeff="1"/>
      </Model>

      <Model name="ActualArrivalTime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="actualarrivaltime"/>
	<Variance value="0"/>
        <Variable table="trips_arrival_from_malta_r" var="arrivaltime" coeff="1"/>
      </Model>


   </Component>

    <Component name="ExtractTravelEpisodes" read_from_table="schedule_final_r" write_to_table="trips_r" key="houseid,personid" skip="False" completed="True">
      <DBTables>
    	<Table table="persons" key="houseid,personid" order="1"/>
    	<Table table="trips_r" key="houseid,personid"/>
    	<Table table="child_dependency_r" key="houseid,personid"/>
    	<Table table="schedule_final_r" key="houseid,personid"/>
      </DBTables>

      <SpatialConstraints table="travel_skims" skim_var="tt" as_var="tt_to" origin_var="origin" destination_var="destination">
	<Start table="schedule_final_r" location_var="locationid" time_var="endtime"/>
	<End table="schedule_final_r" location_var="locationid" time_var="starttime"/>
      </SpatialConstraints>

      <Model name="DummyLocationId" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="locationid"/>
	<Variance value="0"/>
        <Variable table="runtime" var="locationid" coeff="1"/>
      </Model>

      <Model name="VehicleID" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="vehid"/>
	<Variance value="0"/>
        <Variable table="persons" var="one" coeff="1"/>
      </Model>
      <Model name="ModeChoice" formulation="Probability Distribution" seed="1">
        <DependentVariable var="tripmode"/>

        <Alternative id="SOV" value="1">
          <Variable table="persons" var="one" coeff="0.0"/>
        </Alternative>
        <Alternative id="HOVD" value="2">
          <Variable table="persons" var="one" coeff="0.0"/>
        </Alternative>
        <Alternative id="HOVP" value="3">
          <Variable table="persons" var="one" coeff="1.0"/>
        </Alternative>
      </Model>
      <Model name="FromZone" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="fromzone"/>
	<Variance value="0"/>
        <Variable table="runtime" var="st_locationid" coeff="1"/>
      </Model>
      <Model name="ToZone" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="tozone"/>
	<Variance value="0"/>
        <Variable table="runtime" var="en_locationid" coeff="1"/>
      </Model>
      <Model name="starttime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="starttime"/>
	<Variance value="0"/>
        <Variable table="runtime" var="st_endtime" coeff="1"/>
      </Model>
      <Model name="endtime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="endtime"/>
	<Variance value="0"/>
        <Variable table="runtime" var="en_starttime" coeff="1"/>
      </Model>
      <Model name="Duration" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="duration"/>
	<Variance value="0"/>
        <Variable table="runtime" var="endtime" coeff="1"/>
        <Variable table="runtime" var="starttime" coeff="-1"/>
      </Model>
      <Model name="trippurpose" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="trippurpose"/>
	<Variance value="0"/>
        <Variable table="runtime" var="en_activitytype" coeff="1"/>
      </Model>


      <Model name="validtrip" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="tripind"/>
	<Filter table="runtime" var="st_locationid" condition="not equals" valuetable="runtime" valuevar="en_locationid"/>
	<Variance value="0"/>
        <Variable table="persons" var="one" coeff="1"/>
      </Model>

      <Model name="validtrip" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="tripind"/>
        <FilterSet type="and"/>
	<Filter table="runtime" var="st_locationid" condition="equals" valuetable="runtime" valuevar="en_locationid"/>
	<Filter table="runtime" var="en_activitytype" condition="greater than equals" value="200"/>
	<Filter table="runtime" var="duration" condition="greater than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="persons" var="one" coeff="1"/>
      </Model>

      <Model name="validtrip" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="tripind"/>
        <FilterSet type="and"/>
	<Filter table="runtime" var="fromzone" condition="equals" value="106"/>
	<Filter table="runtime" var="tozone" condition="equals" value="1240"/>
	<Variance value="0"/>
        <Variable table="persons" var="one" coeff="1"/>
      </Model>

      <Model name="dummyforadult" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="adulttrips"/>
        <FilterSet type="and"/>
	<Filter table="runtime" var="tripind" condition="equals" value="1"/>
	<Filter table="child_dependency_r" var="dependency" condition="equals" value="0"/>
	<Variance value="0"/>
        <Variable table="persons" var="one" coeff="1"/>
      </Model>

    </Component>


    <Component name="ExtractBackgroundTravelEpisodes" read_from_table="background_trips" write_to_table="trips_r" key="houseid,personid" skip="True" completed="True">
      <DBTables>
    	<Table table="trips_r" key="houseid,personid"/>
   	<Table table="background_trips" key="houseid,personid" order="1"/>
      </DBTables>

      <AnalysisIntervalFilter table="background_trips" var="start_min_indexedat4am"/>


      <Model name="VehicleID" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="vehid"/>
	<Variance value="0"/>
        <Variable table="background_trips" var="vehid" coeff="1"/>
      </Model>

      <Model name="ModeChoice" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="tripmode"/>
	<Variance value="0"/>
        <Variable table="background_trips" var="mode" coeff="1"/>
      </Model>

      <Model name="FromZone" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="fromzone"/>
	<Variance value="0"/>
        <Variable table="background_trips" var="origin_taz" coeff="1"/>
      </Model>

      <Model name="ToZone" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="tozone"/>
	<Variance value="0"/>
        <Variable table="background_trips" var="destination_taz" coeff="1"/>
      </Model>

      <Model name="trippurpose" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="trippurpose"/>
	<Variance value="0"/>
        <Variable table="background_trips" var="purpose" coeff="1"/>
      </Model>

      <Model name="starttime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="starttime"/>
	<Variance value="0"/>
        <Variable table="background_trips" var="start_min_indexedat4am" coeff="1"/>
      </Model>

      <Model name="endtime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="endtime"/>
        <FilterSet type="and"/>
	<Filter table="background_trips" var="origin_region" condition="not equals" value="1"/>
	<Filter table="background_trips" var="destination_region" condition="not equals" value="1"/>
	<Filter table="background_trips" var="origin_taz" condition="less than" value="3000"/>
	<Filter table="background_trips" var="destination_taz" condition="less than" value="3000"/>

	<Variance value="0"/>
        <Variable table="background_trips" var="arrive_min_indexedat4am" coeff="1"/>
      </Model>

    </Component>

    <Component name="ExtractAllTravelEpisodes" read_from_table="trips_r" write_to_table="trips_to_malta_r" key="houseid,personid" skip="False" completed="True">
      <DBTables>
    	<Table table="trips_r" key="houseid,personid" order="1"/>
    	<Table table="trips_to_malta_r" key="houseid,personid"/>
      </DBTables>

      <AnalysisIntervalFilter table="trips_r" var="starttime"/>

      <Model name="TripID" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="tripid"/>
	<Variance value="0"/>
        <Variable table="trips_r" var="tripid" coeff="1"/>
      </Model>


      <Model name="VehicleID" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="vehid"/>
	<Variance value="0"/>
        <Variable table="trips_r" var="vehid" coeff="1"/>
      </Model>

      <Model name="ModeChoice" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="tripmode"/>
	<Variance value="0"/>
        <Variable table="trips_r" var="tripmode" coeff="1"/>
      </Model>

      <Model name="FromZone" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="fromzone"/>
	<Variance value="0"/>
        <Variable table="trips_r" var="fromzone" coeff="1"/>
      </Model>

      <Model name="ToZone" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="tozone"/>
	<Variance value="0"/>
        <Variable table="trips_r" var="tozone" coeff="1"/>
      </Model>

      <Model name="Duration" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="duration"/>
	<Variance value="0"/>
        <Variable table="runtime" var="endtime" coeff="1"/>
        <Variable table="runtime" var="starttime" coeff="-1"/>
      </Model>


      <Model name="trippurpose" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="trippurpose"/>
	<Variance value="0"/>
        <Variable table="trips_r" var="trippurpose" coeff="1"/>
      </Model>

      <Model name="starttime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="starttime"/>
	<Variance value="0"/>
        <Variable table="trips_r" var="starttime" coeff="1"/>
      </Model>

      <Model name="endtime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="endtime"/>
	<Variance value="0"/>
        <Variable table="trips_r" var="endtime" coeff="1"/>
      </Model>

    </Component>




  </ModelConfig>
</ProjectConfig>
